(self.webpackChunkyacd=self.webpackChunkyacd||[]).push([[641],{51471:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return dn}});t(21249);var r=t(34699),i=t(85893),s=t(67294),a=t(34588),o=t(6055),c=t(71218),l=t(25904),u=t(82569),d=t(86010),p=t(83253),f=t.n(p),x=t(93621);const h="_25Hedjekvk",v="_1tfU5GSa-_",m="_2VMuy-HWwC";var y=s.useMemo;function j(e){var n=e.isOpen,t=e.onRequestClose,r=e.children,s=y((function(){return{base:(0,d.Z)(x.Z.content,v),afterOpen:m,beforeClose:""}}),[]);return(0,i.jsx)(f(),{isOpen:n,onRequestClose:t,className:s,overlayClassName:(0,d.Z)(x.Z.overlay,h),children:r})}var C=t(51858),g=t(85295);function b(e){var n=e.color,t=void 0===n?"currentColor":n,r=e.size,s=void 0===r?24:r;return(0,i.jsxs)("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:s,height:s,stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("path",{d:"M2 6h9M18.5 6H22"}),(0,i.jsx)("circle",{cx:"16",cy:"6",r:"2"}),(0,i.jsx)("path",{d:"M22 18h-9M6 18H2"}),(0,i.jsx)("circle",{r:"2",transform:"matrix(-1 0 0 1 8 18)"})]})}const k="_1NNIVhRL-n";function w(e){var n=e.children;return(0,i.jsx)("div",{className:k,children:n})}var N=s.useRef,Z=s.useEffect;function _(e){var n=e.onClickPrimaryButton,t=e.onClickSecondaryButton,r=N(null),s=N(null);Z((function(){r.current.focus()}),[]);return(0,i.jsxs)("div",{onKeyDown:function(e){39===e.keyCode?s.current.focus():37===e.keyCode&&r.current.focus()},children:[(0,i.jsx)("h2",{children:"Close Connections?"}),(0,i.jsx)("p",{children:'Click "Yes" to close those connections that are still using the old selected proxy in this group'}),(0,i.jsx)("div",{style:{height:30}}),(0,i.jsxs)(w,{children:[(0,i.jsx)(l.Z,{onClick:n,ref:r,children:"Yes"}),(0,i.jsx)("div",{style:{width:20}}),(0,i.jsx)(l.Z,{onClick:t,ref:s,children:"No"})]})]})}const O="_2adLhYLrrV",S="_1gc_yljm7w",P="_1N0wXB7TV7",U="_35E6rdJlPT",A="_3NWc4-pcFT";var B=t(87757),L=t.n(B),M=(t(35666),t(92137)),D=t(27434);const R="_2qbBB1Sojw",E="_1iuVspxe4f",V="_2CN_S7POBQ",T="_3504uhlYv5",I="_3Vynmp3NK4";var W=t(17132);function H(e){var n=e.name,t=e.type,r=e.toggle,a=e.isOpen,o=e.qty,c=s.useCallback((function(e){e.preventDefault(),"Enter"!==e.key&&" "!==e.key||r()}),[r]);return(0,i.jsxs)("div",{className:R,onClick:r,style:{cursor:"pointer"},tabIndex:0,onKeyDown:c,role:"button",children:[(0,i.jsx)("div",{children:(0,i.jsx)(W.$,{name:n,type:t})}),"number"==typeof o?(0,i.jsx)("span",{className:I,children:o}):null,(0,i.jsx)(l.Z,{kind:"minimal",onClick:r,className:T,children:(0,i.jsx)("span",{className:(0,d.Z)(E,{[V]:a}),children:(0,i.jsx)(D.Z,{size:20})})})]})}t(57327),t(82772),t(2707),t(23123),t(73210);var F=t(87329),Y=t(2804),$=s.useMemo;var q=function(e,n){if(e&&"number"==typeof e.number&&e.number>0)return e.number;var t=n&&n.type;return t&&c.SJ.indexOf(t)>-1?-1:999999},z={Natural:function(e){return e},LatencyAsc:function(e,n,t){return e.sort((function(e,r){return q(n[e],t&&t[e])-q(n[r],t&&t[r])}))},LatencyDesc:function(e,n,t){return e.sort((function(e,r){var i=q(n[e],t&&t[e]);return q(n[r],t&&t[r])-i}))},NameAsc:function(e){return e.sort()},NameDesc:function(e){return e.sort((function(e,n){return e>n?-1:e<n?1:0}))}};function G(e,n,t,i,s){var a=(0,Y.FV)(c.RE),o=(0,r.Z)(a,1)[0];return $((function(){return function(e,n,t,r,i,s){var a=(0,F.Z)(e);return t&&(a=function(e,n){return e.filter((function(e){var t=n[e];return void 0===t||0!==t.number}))}(e,n)),"string"==typeof r&&""!==r&&(a=function(e,n){var t=n.toLowerCase().split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e}));return 0===t.length?e:e.filter((function(e){for(var n=0;n<t.length;n++){var r=t[n];if(e.toLowerCase().indexOf(r)>-1)return!0}return!1}))}(a,r)),z[i](a,n,s)}(e,n,t,o,i,s)}),[e,n,t,o,i,s])}const K={header:"v5oNKUwcTc",zapWrapper:"_2fR1H0ysyY"};var X=13;const J="_5-kOJyYfSn",Q="MbWebw2VH4",ee="_2dlAYgAIKi",ne="_3rB1UgDAL6",te="nnjdzHZySt",re="_2E11-huRp7",ie="_2Eys6UMXCm",se="_2rRGWVNOYC",ae="_1GlyjMFCSf";function oe(e){var n=e.number,t=e.color;return(0,i.jsx)("span",{className:ae,style:{color:t},children:(0,i.jsxs)("span",{children:[n," ms"]})})}var ce=s.useMemo,le="#67c23a",ue="#d4b75c",de="#e67f3c",pe="#909399";function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.number;return 0===n?pe:n<200?le:n<400?ue:"number"==typeof n?de:pe}var xe=function(e,n){var t=n.name,r=(0,c.yi)(e),i=(0,c.sj)(e);return{proxy:r[t],latency:i[t]}},he=(0,g.$j)(xe)((function(e){var n=e.now,t=e.name,r=e.proxy,a=e.latency,o=e.isSelectable,c=e.onClick,l=ce((function(){return fe(a)}),[a]),u=s.useCallback((function(){o&&c&&c(t)}),[t,c,o]),p=s.useCallback((function(e){e.keyCode===X&&u()}),[u]),f=ce((function(){return(0,d.Z)(J,{[Q]:n,[ee]:a&&a.error,[ne]:o})}),[o,n,a]);return(0,i.jsxs)("div",{tabIndex:0,className:f,onClick:u,onKeyDown:p,role:o?"menuitem":"",children:[(0,i.jsx)("div",{className:ie,children:t}),(0,i.jsxs)("div",{className:re,children:[(0,i.jsx)("span",{className:te,style:{opacity:n?.6:.2},children:r.type}),a&&a.number?(0,i.jsx)(oe,{number:a.number,color:l}):null]})]})})),ve=(0,g.$j)(xe)((function(e){var n=e.now,t=e.name,r=e.proxy,a=e.latency,o=e.isSelectable,l=e.onClick,u=ce((function(){return function(e,n){return c.SJ.indexOf(n)>-1?"linear-gradient(135deg, white 15%, #999 15% 30%, white 30% 45%, #999 45% 60%, white 60% 75%, #999 75% 90%, white 90% 100%)":fe(e)}(a,r.type)}),[a,r]),p=ce((function(){var e=t;return a&&"number"==typeof a.number&&(e+=" "+a.number+" ms"),e}),[t,a]),f=s.useCallback((function(){o&&l&&l(t)}),[t,l,o]),x=ce((function(){return(0,d.Z)(se,{[Q]:n,[ne]:o})}),[o,n]),h=s.useCallback((function(e){e.keyCode===X&&f()}),[f]);return(0,i.jsx)("div",{title:p,className:x,style:{background:u},onClick:f,onKeyDown:h,role:o?"menuitem":""})}));const me="_1pPZyUDtdp",ye="_6uXcWV1Myk";function je(e){var n=e.all,t=e.now,r=e.isSelectable,s=e.itemOnTapCallback,a=n;return(0,i.jsx)("div",{className:me,children:a.map((function(e){return(0,i.jsx)(he,{onClick:s,isSelectable:r,name:e,now:e===t},e)}))})}function Ce(e){var n=e.all,t=e.now,r=e.isSelectable,s=e.itemOnTapCallback;return(0,i.jsx)("div",{className:ye,children:n.map((function(e){return(0,i.jsx)(ve,{onClick:s,isSelectable:r,name:e,now:e===t},e)}))})}var ge=s.createElement,be=s.useCallback,ke=s.useMemo,we=s.useState;function Ne(){return(0,i.jsx)("div",{className:K.zapWrapper,children:(0,i.jsx)(a.Z,{size:16})})}var Ze=(0,g.$j)((function(e,n){var t=n.name,r=n.delay,i=(0,c.yi)(e),s=(0,o.VR)(e),a=(0,o.S3)(e),l=(0,o.sU)(e),u=i[t];return{all:u.all,delay:r,hideUnavailableProxies:l,proxySortBy:a,proxies:i,type:u.type,now:u.now,isOpen:s["proxyGroup:"+t]}}))((function(e){var n=e.name,t=e.all,s=e.delay,a=e.hideUnavailableProxies,o=e.proxySortBy,u=e.proxies,d=e.type,p=e.now,f=e.isOpen,x=e.apiConfig,h=e.dispatch,v=G(t,s,a,o,u),m=ke((function(){return"Selector"===d}),[d]),y=(0,g.WX)(),j=y.app.updateCollapsibleIsOpen,C=y.proxies.requestDelayForProxies,b=be((function(){j("proxyGroup",n,!f)}),[f,j,n]),k=be((function(e){m&&h((0,c.hU)(x,n,e))}),[x,h,n,m]),w=we(!1),N=(0,r.Z)(w,2),Z=N[0],_=N[1],O=be((0,M.Z)(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,C(x,v);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:_(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),[v,x,C]);return(0,i.jsxs)("div",{className:K.group,children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(H,{name:n,type:d,toggle:b,qty:v.length,isOpen:f}),(0,i.jsx)(l.Z,{kind:"minimal",onClick:O,isLoading:Z,children:(0,i.jsx)(Ne,{})})]}),ge(f?je:Ce,{all:v,now:p,isSelectable:m,itemOnTapCallback:k})]})})),_e=t(70296),Oe=t(86178),Se=t(88757),Pe=t(91033),Ue=s.memo,Ae=s.useState,Be=s.useRef,Le=s.useEffect;var Me={initialOpen:{height:"auto",transition:{duration:0}},open:function(e){return{height:e,opacity:1,visibility:"visible",transition:{duration:.3}}},closed:{height:0,opacity:0,visibility:"hidden",transition:{duration:.3}}},De={open:{x:0},closed:{x:20}};const Re=Ue((function(e){var n,t,s=e.children,a=e.isOpen,o=Se.U.read().motion,c=(n=a,t=Be(),Le((function(){t.current=n}),[n]),t.current),l=function(){var e=Be(),n=Ae({height:0}),t=(0,r.Z)(n,2),i=t[0],s=t[1];return Le((function(){var n=new Pe.Z((function(e){var n=(0,r.Z)(e,1)[0];return s(n.contentRect)}));return e.current&&n.observe(e.current),function(){return n.disconnect()}}),[]),[e,i]}(),u=(0,r.Z)(l,2),d=u[0],p=u[1].height;return(0,i.jsx)("div",{children:(0,i.jsx)(o.div,{animate:a&&c===a?"initialOpen":a?"open":"closed",custom:p,variants:Me,children:(0,i.jsx)(o.div,{variants:De,ref:d,children:s})})})})),Ee="_113att7Ifr",Ve="_26mH_RmGnl",Te="_2cXcxGEUNI",Ie="_2NjdAt9CvG";var We=s.useState,He=s.useCallback;var Fe={rest:{scale:1},pressed:{scale:.95}},Ye={rest:{rotate:0},hover:{rotate:360,transition:{duration:.3}}};function $e(){var e=Se.U.read().motion;return(0,i.jsx)(e.div,{className:Ie,variants:Fe,initial:"rest",whileHover:"hover",whileTap:"pressed",children:(0,i.jsx)(e.div,{className:"flexCenter",variants:Ye,children:(0,i.jsx)(Oe.Z,{size:16})})})}var qe=(0,g.$j)((function(e,n){var t=n.proxies,r=n.name,i=(0,o.sU)(e),s=(0,c.sj)(e),a=(0,o.VR)(e);return{apiConfig:(0,o.Y$)(e),proxies:t,delay:s,hideUnavailableProxies:i,proxySortBy:(0,o.S3)(e),isOpen:a["proxyProvider:"+r]}}))((function(e){var n=e.name,t=e.proxies,s=e.delay,o=e.hideUnavailableProxies,u=e.proxySortBy,d=e.vehicleType,p=e.updatedAt,f=e.isOpen,x=e.dispatch,h=e.apiConfig,v=G(t,s,o,u),m=We(!1),y=(0,r.Z)(m,2),j=y[0],C=y[1],b=He((function(){return x((0,c.kL)(h,n))}),[h,x,n]),k=He((0,M.Z)(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,x((0,c.IA)(h,n));case 3:C(!1);case 4:case"end":return e.stop()}}),e)}))),[h,x,n,C]),w=(0,g.WX)().app.updateCollapsibleIsOpen,N=He((function(){w("proxyProvider",n,!f)}),[f,w,n]),Z=(0,_e.Z)(new Date(p),new Date);return(0,i.jsxs)("div",{className:Ve,children:[(0,i.jsx)(H,{name:n,toggle:N,type:d,isOpen:f,qty:v.length}),(0,i.jsx)("div",{className:Ee,children:(0,i.jsxs)("small",{children:["Updated ",Z," ago"]})}),(0,i.jsxs)(Re,{isOpen:f,children:[(0,i.jsx)(je,{all:v}),(0,i.jsxs)("div",{className:Te,children:[(0,i.jsx)(l.Z,{text:"Update",start:(0,i.jsx)($e,{}),onClick:b}),(0,i.jsx)(l.Z,{text:"Health Check",start:(0,i.jsx)(a.Z,{size:16}),onClick:k,isLoading:j})]})]}),(0,i.jsx)(Re,{isOpen:!f,children:(0,i.jsx)(Ce,{all:v})})]})}));function ze(e){var n=e.items;return 0===n.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{title:"Proxy Provider"}),(0,i.jsx)("div",{children:n.map((function(e){return(0,i.jsx)(qe,{name:e.name,proxies:e.proxies,type:e.type,vehicleType:e.vehicleType,updatedAt:e.updatedAt},e.name)}))})]})}const Ge="_2epoA7G8CQ";function Ke(e){var n=e.options,t=e.selected,s=e.onChange;return(0,i.jsx)("select",{className:Ge,value:t,onChange:s,children:n.map((function(e){var n=(0,r.Z)(e,2),t=n[0],s=n[1];return(0,i.jsx)("option",{value:t,children:s},t)}))})}var Xe=t(26512);const Je="_1tkxMBL44k";var Qe=[["Natural","Original order in config file"],["LatencyAsc","By latency from small to big"],["LatencyDesc","By latency from big to small"],["NameAsc","By name alphabetically (A-Z)"],["NameDesc","By name alphabetically (Z-A)"]],en=s.useCallback;const nn=(0,g.$j)((function(e){return{appConfig:{proxySortBy:(0,o.S3)(e),hideUnavailableProxies:(0,o.sU)(e),autoCloseOldConns:(0,o.xE)(e)}}}))((function(e){var n=e.appConfig,t=(0,g.WX)().app.updateAppConfig,r=en((function(e){t("proxySortBy",e.target.value)}),[t]),s=en((function(e){t("hideUnavailableProxies",e)}),[t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:Je,children:[(0,i.jsx)("span",{children:"Sorting in group"}),(0,i.jsx)("div",{children:(0,i.jsx)(Ke,{options:Qe,selected:n.proxySortBy,onChange:r})})]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("div",{className:Je,children:[(0,i.jsx)("span",{children:"Hide unavailable proxies"}),(0,i.jsx)("div",{children:(0,i.jsx)(Xe.Z,{name:"hideUnavailableProxies",checked:n.hideUnavailableProxies,onChange:s})})]}),(0,i.jsxs)("div",{className:Je,children:[(0,i.jsx)("span",{children:"Automatically close old connections"}),(0,i.jsx)("div",{children:(0,i.jsx)(Xe.Z,{name:"autoCloseOldConns",checked:n.autoCloseOldConns,onChange:function(e){return t("autoCloseOldConns",e)}})})]})]})}));var tn=t(44774),rn=t(57944);function sn(){var e=(0,tn.g)(c.RE),n=(0,r.Z)(e,2),t=n[0],s=n[1];return(0,i.jsx)("input",{className:rn.Z.input,type:"text",value:s,onChange:t})}var an=s.useState,on=s.useEffect,cn=s.useCallback,ln=s.useRef;function un(){return(0,i.jsx)("div",{className:A,style:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(a.Z,{width:16,height:16})})}const dn=(0,g.$j)((function(e){return{apiConfig:(0,o.Y$)(e),groupNames:(0,c.P_)(e),proxyProviders:(0,c.a)(e),delay:(0,c.sj)(e),showModalClosePrevConns:(0,c.DP)(e)}}))((function(e){var n=e.dispatch,t=e.groupNames,s=e.delay,o=e.proxyProviders,d=e.apiConfig,p=e.showModalClosePrevConns,f=ln({}),x=an(!1),h=(0,r.Z)(x,2),v=h[0],m=h[1],y=cn((function(){v||(m(!0),n((0,c.$3)(d)).then((function(){return m(!1)}),(function(){return m(!1)})))}),[d,n,v]),k=cn((function(){f.current.startAt=Date.now(),n((0,c.Ry)(d)).then((function(){f.current.completeAt=Date.now()}))}),[d,n]);on((function(){k();var e=function(){f.current.startAt&&Date.now()-f.current.startAt>3e4&&k()};return window.addEventListener("focus",e,!1),function(){return window.removeEventListener("focus",e,!1)}}),[k]);var w=an(!1),N=(0,r.Z)(w,2),Z=N[0],A=N[1],B=cn((function(){A(!1)}),[]),L=(0,g.WX)().proxies,M=L.closeModalClosePrevConns,D=L.closePrevConnsAndTheModal;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{isOpen:Z,onRequestClose:B,children:(0,i.jsx)(nn,{})}),(0,i.jsxs)("div",{className:O,children:[(0,i.jsx)(u.Z,{title:"Proxies"}),(0,i.jsxs)("div",{className:S,children:[(0,i.jsx)("div",{className:P,children:(0,i.jsx)(sn,{})}),(0,i.jsx)(l.Z,{kind:"minimal",onClick:function(){return A(!0)},children:(0,i.jsx)(b,{size:16})})]})]}),(0,i.jsx)("div",{children:t.map((function(e){return(0,i.jsx)("div",{className:U,children:(0,i.jsx)(Ze,{name:e,delay:s,apiConfig:d,dispatch:n})},e)}))}),(0,i.jsx)(ze,{items:o}),(0,i.jsx)("div",{style:{height:60}}),(0,i.jsx)(C.Lg,{icon:v?(0,i.jsx)(un,{}):(0,i.jsx)(a.Z,{width:16,height:16}),onClick:y,text:"Test Latency",position:C.FK}),(0,i.jsx)(j,{isOpen:p,onRequestClose:M,children:(0,i.jsx)(_,{onClickPrimaryButton:function(){return D(d)},onClickSecondaryButton:M})})]})}))},51858:function(e,n,t){"use strict";t.d(n,{FK:function(){return i},Lg:function(){return r.L},aU:function(){return r.a}});var r=t(34179),i={right:10,bottom:10}},44774:function(e,n,t){"use strict";t.d(n,{g:function(){return u}});var r=t(34699),i=t(80125),s=t(67294),a=t(2804),o=s.useCallback,c=s.useState,l=s.useMemo;function u(e){var n=(0,a.FV)(e),t=(0,r.Z)(n,2)[1],s=c(""),u=(0,r.Z)(s,2),d=u[0],p=u[1],f=l((function(){return(0,i.Z)(t,300)}),[t]);return[o((function(e){p(e.target.value),f(e.target.value)}),[f]),d]}},57944:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});const r={input:"_1I0EXOg8Vu"}}}]);
//# sourceMappingURL=proxies.70a2677bab36be9dae87.js.map